<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Don Dinero - Marketplace Responsivo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Playfair+Display:italic@700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            overflow-x: hidden;
        }
        .font-serif-italic {
            font-family: 'Playfair Display', serif;
            font-style: italic;
        }
        /* Sombras suaves personalizadas */
        .custom-shadow {
            box-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.05);
        }
        /* Ocultar scrollbar pero permitir scroll */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* Ajuste para que las im谩genes no se deformen */
        .aspect-card {
            aspect-ratio: 16 / 9;
        }
    </style>
</head>
<body class="text-slate-900 leading-tight">

    <!-- NAVEGACIN RESPONSIVA -->
    <nav class="bg-emerald-600 text-white shadow-xl sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 sm:h-20 items-center gap-2 sm:gap-4">
                
                <!-- Logo -->
                <div class="flex items-center gap-2 sm:gap-3 cursor-pointer shrink-0" onclick="showView('shop')">
                    <div class="bg-white p-1.5 sm:p-2 rounded-xl sm:rounded-2xl shadow-inner rotate-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div class="flex flex-col">
                        <div class="font-black text-sm sm:text-xl tracking-tighter uppercase italic leading-none">Don Dinero</div>
                        <div class="text-[7px] sm:text-[9px] uppercase tracking-[0.1em] sm:tracking-[0.2em] font-bold opacity-70">Premium</div>
                    </div>
                </div>

                <!-- Buscador Desktop (Oculto en m贸vil) -->
                <div class="hidden md:block flex-1 max-w-md relative group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="absolute left-4 top-1/2 -translate-y-1/2 text-emerald-200 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    <input 
                        type="text" 
                        id="searchInput"
                        oninput="handleSearch(this.value)"
                        placeholder="Buscar servicios..." 
                        class="w-full bg-emerald-700/50 border-none rounded-xl py-2.5 pl-11 pr-4 text-sm placeholder:text-emerald-200 focus:ring-2 focus:ring-white/20 outline-none transition-all text-white"
                    />
                </div>

                <!-- Botones Acci贸n -->
                <div class="flex items-center gap-1 sm:gap-2">
                    <button id="btnShop" onclick="showView('shop')" class="px-3 sm:px-4 py-2 rounded-xl text-[10px] sm:text-xs font-black transition-all bg-white text-emerald-600 shadow-lg">TIENDA</button>
                    <button id="btnAdmin" onclick="handleAdminClick()" class="px-3 sm:px-4 py-2 rounded-xl text-[10px] sm:text-xs font-black transition-all flex items-center gap-1.5 sm:gap-2 hover:bg-emerald-500">
                        <span id="lockIcon">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                        </span>
                        ADMIN
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Buscador m贸vil (Visible solo en m贸vil/tablet peque帽a) -->
    <div class="md:hidden bg-emerald-600 px-4 pb-4 shadow-lg">
        <div class="relative">
            <svg xmlns="http://www.w3.org/2000/svg" class="absolute left-4 top-1/2 -translate-y-1/2 text-emerald-200 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            <input 
                type="text" 
                id="searchMobile"
                oninput="handleSearch(this.value)"
                placeholder="驴Qu茅 buscas hoy?" 
                class="w-full bg-emerald-700/50 border-none rounded-xl py-2.5 pl-11 pr-4 text-sm text-white placeholder:text-emerald-200 outline-none focus:ring-1 focus:ring-white/30"
            />
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="max-w-7xl mx-auto px-4 py-6 sm:py-10 sm:px-6 lg:px-8">
        
        <!-- VISTA TIENDA -->
        <div id="shopView" class="animate__animated animate__fadeIn">
            <div class="mb-6 sm:mb-10 flex flex-col sm:flex-row sm:items-end justify-between gap-4">
                <div>
                    <h1 class="text-3xl sm:text-5xl font-black text-slate-900 tracking-tighter italic uppercase leading-none">Marketplace</h1>
                    <p class="text-slate-400 text-xs sm:text-sm mt-2 font-serif-italic">Servicios digitales al mejor precio</p>
                </div>
            </div>
            
            <!-- Grid Responsivo: 1 col m贸vil, 2 tablet, 3-4 desktop -->
            <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-8">
                <!-- Se inyecta con JS -->
            </div>

            <!-- Estado Vac铆o -->
            <div id="noResults" class="hidden text-center py-20 sm:py-32 bg-white rounded-[2rem] sm:rounded-[3rem] border border-slate-100 flex flex-col items-center px-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-slate-100 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                <h2 class="text-xl font-black text-slate-300 uppercase italic">No encontramos nada</h2>
                <p class="text-slate-400 text-sm mt-1">Intenta con otra palabra clave</p>
            </div>
        </div>

        <!-- VISTA ADMIN -->
        <div id="adminView" class="hidden animate__animated animate__fadeIn">
            <div class="flex flex-col lg:flex-row gap-6 sm:gap-8">
                
                <!-- Formulario Lateral (Arriba en m贸vil, lateral en desktop) -->
                <div class="w-full lg:w-1/3 xl:w-1/4">
                    <div class="bg-white p-6 sm:p-8 rounded-[2rem] sm:rounded-[2.5rem] shadow-sm border border-slate-100 lg:sticky lg:top-32">
                        <h2 class="text-xl font-black italic uppercase tracking-tighter mb-6 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                            Nuevo tem
                        </h2>
                        <form id="productForm" class="space-y-3 sm:space-y-4">
                            <input type="text" id="pName" required placeholder="Nombre del producto" class="w-full p-4 bg-slate-50 rounded-xl border-none font-bold text-sm outline-none focus:ring-2 focus:ring-emerald-500/20">
                            
                            <div class="grid grid-cols-2 gap-2 sm:gap-3">
                                <input type="number" step="0.01" id="pPrice" required placeholder="Precio" class="w-full p-4 bg-slate-50 rounded-xl border-none font-bold text-sm outline-none">
                                <select id="pCategory" class="w-full p-4 bg-slate-50 rounded-xl border-none font-bold text-xs outline-none">
                                    <option>Cuentas</option>
                                    <option>Servicios</option>
                                    <option>Gamer</option>
                                </select>
                            </div>

                            <textarea id="pDesc" class="w-full p-4 bg-slate-50 rounded-xl h-24 resize-none border-none text-xs italic font-serif-italic outline-none" placeholder="Breve descripci贸n..."></textarea>
                            <input type="url" id="pImage" placeholder="URL de la imagen" class="w-full p-4 bg-slate-50 rounded-xl border-none text-xs outline-none">
                            
                            <button type="submit" class="w-full bg-slate-900 text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs hover:bg-black transition-all shadow-lg active:scale-95">Publicar Ahora</button>
                        </form>
                    </div>
                </div>
                
                <!-- Tabla de Gesti贸n (Scroll horizontal en m贸vil) -->
                <div class="w-full lg:w-2/3 xl:w-3/4">
                    <div class="bg-white rounded-[2rem] sm:rounded-[2.5rem] shadow-sm border border-slate-100 overflow-hidden">
                        <div class="p-6 sm:p-8 border-b border-slate-50 flex justify-between items-center bg-white/80 backdrop-blur sticky top-0 z-10">
                            <h2 class="text-lg sm:text-xl font-black italic uppercase tracking-tighter flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="text-indigo-600 h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                                Inventario
                            </h2>
                            <span id="totalBadge" class="bg-slate-100 text-slate-500 px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest">Items: 0</span>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left min-w-[500px]">
                                <thead class="bg-slate-50/50 text-slate-400 text-[9px] uppercase font-black tracking-widest">
                                    <tr>
                                        <th class="px-6 sm:px-8 py-4">Servicio</th>
                                        <th class="px-6 sm:px-8 py-4 text-right">Precio</th>
                                        <th class="px-6 sm:px-8 py-4 text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="adminTableBody" class="divide-y divide-slate-50">
                                    <!-- Inyectado por JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- MODAL LOGIN (Adaptado) -->
    <div id="loginModal" class="hidden fixed inset-0 bg-slate-900/90 backdrop-blur-sm z-[100] flex items-center justify-center p-6">
        <div class="bg-white rounded-[2.5rem] p-8 w-full max-w-sm shadow-2xl border-b-8 border-emerald-600 animate__animated animate__zoomIn animate__faster">
            <div class="bg-emerald-50 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 mx-auto">
                <svg xmlns="http://www.w3.org/2000/svg" class="text-emerald-600 h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <h3 class="font-black text-xl mb-1 text-center uppercase italic">Acceso Admin</h3>
            <p class="text-slate-400 text-center text-xs mb-8 italic font-serif-italic">Introduce la clave para gestionar</p>
            <form id="loginForm" class="space-y-4">
                <input 
                    type="password" 
                    id="passwordInput"
                    placeholder="Contrase帽a" 
                    class="w-full p-4 bg-slate-50 border-2 border-transparent rounded-2xl outline-none text-center text-lg font-bold focus:ring-4 focus:ring-emerald-500/20 focus:bg-white transition-all"
                />
                <button type="submit" class="w-full bg-emerald-600 text-white py-4 rounded-2xl font-black uppercase tracking-widest hover:bg-emerald-700 transition shadow-lg">Verificar</button>
                <button type="button" onclick="closeLogin()" class="w-full text-slate-300 text-[9px] font-black uppercase tracking-widest mt-2 hover:text-slate-400 transition">Cancelar</button>
            </form>
        </div>
    </div>

    <script>
        // ESTADO GLOBAL
        let currentView = 'shop';
        let isAdminAuthenticated = false;
        let searchTerm = "";
        
        // Base de datos simulada
        let products = [
            {
                id: 1,
                customId: "DD-7721",
                name: "Netflix Premium 4K",
                price: 12.50,
                category: "Cuentas",
                description: "Calidad Ultra HD, 4 pantallas y acceso garantizado por 30 d铆as.",
                image: "https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=600&q=80"
            },
            {
                id: 2,
                customId: "DD-1092",
                name: "Spotify Family",
                price: 8.00,
                category: "Cuentas",
                description: "Plan familiar 1 mes, sin anuncios, m煤sica offline y alta fidelidad.",
                image: "https://images.unsplash.com/photo-1614680376593-902f74cf0d41?w=600&q=80"
            },
            {
                id: 3,
                customId: "DD-3342",
                name: "YouTube Premium",
                price: 5.99,
                category: "Servicios",
                description: "Sin anuncios, reproducci贸n en segundo plano y YouTube Music incluido.",
                image: "https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?w=600&q=80"
            }
        ];

        // GESTIN DE VISTAS
        function showView(view) {
            currentView = view;
            const shop = document.getElementById('shopView');
            const admin = document.getElementById('adminView');
            const bShop = document.getElementById('btnShop');
            const bAdmin = document.getElementById('btnAdmin');

            if(view === 'shop') {
                shop.classList.remove('hidden');
                admin.classList.add('hidden');
                bShop.className = "px-3 sm:px-4 py-2 rounded-xl text-[10px] sm:text-xs font-black transition-all bg-white text-emerald-600 shadow-lg";
                bAdmin.className = "px-3 sm:px-4 py-2 rounded-xl text-[10px] sm:text-xs font-black transition-all flex items-center gap-2 hover:bg-emerald-500 text-white";
            } else {
                shop.classList.add('hidden');
                admin.classList.remove('hidden');
                bShop.className = "px-3 sm:px-4 py-2 rounded-xl text-[10px] sm:text-xs font-black transition-all hover:bg-emerald-500 text-white";
                bAdmin.className = "px-3 sm:px-4 py-2 rounded-xl text-[10px] sm:text-xs font-black transition-all flex items-center gap-2 bg-white text-emerald-600 shadow-lg";
            }
            render();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ACCESO ADMIN
        function handleAdminClick() {
            if (isAdminAuthenticated) {
                showView('admin');
            } else {
                document.getElementById('loginModal').classList.remove('hidden');
                document.getElementById('passwordInput').focus();
            }
        }

        function closeLogin() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('passwordInput').value = "";
        }

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const pass = document.getElementById('passwordInput').value;
            if(pass === "admin123") {
                isAdminAuthenticated = true;
                closeLogin();
                showView('admin');
                document.getElementById('lockIcon').innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-emerald-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 11V7a5 5 0 0 1 10 0v4"></path><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect></svg>`;
            } else {
                const input = document.getElementById('passwordInput');
                input.classList.add('ring-4', 'ring-red-500/20', 'border-red-500');
                setTimeout(() => input.classList.remove('ring-4', 'ring-red-500/20', 'border-red-500'), 1000);
            }
        });

        // BSQUEDA SINCRONIZADA
        function handleSearch(val) {
            searchTerm = val.toLowerCase();
            // Sincronizar ambos inputs
            document.getElementById('searchInput').value = val;
            document.getElementById('searchMobile').value = val;
            render();
        }

        // ACCIONES DE PRODUCTO
        document.getElementById('productForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const newP = {
                id: Date.now(),
                customId: "DD-" + Math.floor(1000 + Math.random() * 9000),
                name: document.getElementById('pName').value,
                price: parseFloat(document.getElementById('pPrice').value),
                category: document.getElementById('pCategory').value,
                description: document.getElementById('pDesc').value,
                image: document.getElementById('pImage').value || "https://images.unsplash.com/photo-1557683316-973673baf926?w=600&q=80"
            };
            products.unshift(newP);
            document.getElementById('productForm').reset();
            render();
        });

        function deleteProduct(id) {
            products = products.filter(p => p.id !== id);
            render();
        }

        function contactWhatsApp(name, id) {
            const text = encodeURIComponent(`隆Hola Don Dinero!  Me interesa el servicio: ${name} (ID: ${id}). 驴Sigue disponible?`);
            window.open(`https://wa.me/5491100000000?text=${text}`, '_blank');
        }

        // LGICA DE DIBUJO (RENDER)
        function render() {
            const grid = document.getElementById('productsGrid');
            const table = document.getElementById('adminTableBody');
            const noResults = document.getElementById('noResults');
            const totalBadge = document.getElementById('totalBadge');

            const filtered = products.filter(p => 
                p.name.toLowerCase().includes(searchTerm) || 
                p.customId.toLowerCase().includes(searchTerm) ||
                p.category.toLowerCase().includes(searchTerm)
            );

            // Renderizar Tienda
            grid.innerHTML = "";
            if(filtered.length === 0) {
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
                filtered.forEach(p => {
                    grid.innerHTML += `
                        <div class="bg-white rounded-[2rem] shadow-sm hover:shadow-2xl transition-all border border-slate-100 overflow-hidden flex flex-col group hover:-translate-y-1 duration-300">
                            <div class="aspect-card overflow-hidden relative bg-slate-100">
                                <img src="${p.image}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
                                <div class="absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-xl text-[8px] font-black uppercase text-emerald-600 shadow-sm italic">
                                    ${p.category}
                                </div>
                            </div>
                            <div class="p-5 sm:p-6 flex-1 flex flex-col">
                                <span class="text-[8px] font-black text-slate-300 uppercase tracking-widest mb-1">Ref: ${p.customId}</span>
                                <h3 class="font-black text-lg sm:text-xl text-slate-800 line-clamp-1 mb-1 tracking-tight uppercase italic">${p.name}</h3>
                                <p class="text-[11px] sm:text-xs text-slate-400 mb-6 flex-1 line-clamp-2 italic font-serif-italic leading-relaxed">${p.description}</p>
                                <div class="flex items-center justify-between mt-auto">
                                    <div class="text-xl sm:text-2xl font-black text-slate-900 tracking-tighter">$${p.price.toFixed(2)}</div>
                                    <button onclick="contactWhatsApp('${p.name}', '${p.customId}')" class="flex items-center gap-2 bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition shadow-md active:scale-95 text-[10px] font-bold">
                                        PEDIR
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }

            // Renderizar Tabla Admin
            table.innerHTML = "";
            totalBadge.innerText = "Items: " + products.length;
            products.forEach(p => {
                table.innerHTML += `
                    <tr class="hover:bg-slate-50/50 transition-colors">
                        <td class="px-6 sm:px-8 py-4">
                            <div class="flex items-center gap-3">
                                <div class="h-10 w-10 rounded-lg bg-slate-100 overflow-hidden shrink-0 hidden sm:block">
                                    <img src="${p.image}" class="w-full h-full object-cover">
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-[8px] text-emerald-600 font-black uppercase">${p.customId}</span>
                                    <span class="font-bold text-slate-800 text-sm uppercase italic tracking-tight">${p.name}</span>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 sm:px-8 py-4 text-right font-black text-base sm:text-lg text-slate-900 tracking-tighter">
                            $${p.price.toFixed(2)}
                        </td>
                        <td class="px-6 sm:px-8 py-4 text-center">
                            <button onclick="deleteProduct(${p.id})" class="p-2 text-slate-200 hover:text-red-500 transition-all hover:scale-110">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                            </button>
                        </td>
                    </tr>
                `;
            });
        }

        // Arranque inicial
        window.onload = render;
    </script>
</body>
</html>
